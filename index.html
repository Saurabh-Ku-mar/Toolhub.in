<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExamPrep Gyaan - Complete Educational Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <style>
        .tool-card { transition: all 0.3s ease; }
        .tool-card:hover { transform: translateY(-2px); }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .dark .gradient-bg { background: linear-gradient(135deg, #2D3748 0%, #4A5568 100%); }
        .mcq-option { transition: all 0.2s ease; }
        .mcq-option:hover { background-color: rgba(99, 102, 241, 0.1); }
        .mcq-option.selected { background-color: rgba(99, 102, 241, 0.2); border-color: #6366f1; }
        .mcq-option.correct { background-color: rgba(34, 197, 94, 0.2); border-color: #22c55e; }
        .mcq-option.incorrect { background-color: rgba(239, 68, 68, 0.2); border-color: #ef4444; }
        .leaderboard-item { animation: slideInUp 0.5s ease forwards; opacity: 0; transform: translateY(20px); }
        .leaderboard-item:nth-child(1) { animation-delay: 0.1s; }
        .leaderboard-item:nth-child(2) { animation-delay: 0.2s; }
        .leaderboard-item:nth-child(3) { animation-delay: 0.3s; }
        @keyframes slideInUp { to { opacity: 1; transform: translateY(0); } }
        .progress-ring { transform: rotate(-90deg); }
        .chat-message { animation: fadeInUp 0.3s ease; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .tool-section { display: none; }
        .tool-section.active { display: block; }
        .drag-area { border: 2px dashed #cbd5e0; border-radius: 8px; padding: 40px; text-align: center; transition: all 0.3s ease; }
        .drag-area.dragover { border-color: #6366f1; background-color: rgba(99, 102, 241, 0.05); }
        .file-preview { max-width: 100%; max-height: 300px; object-fit: contain; }
        .range-slider { -webkit-appearance: none; width: 100%; height: 6px; border-radius: 3px; background: #e2e8f0; outline: none; }
        .range-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%; background: #6366f1; cursor: pointer; }
        .range-slider::-moz-range-thumb { width: 18px; height: 18px; border-radius: 50%; background: #6366f1; cursor: pointer; border: none; }
    </style>
</head>
<body class="min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Navigation -->
    <nav class="gradient-bg shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-white">
                        <i class="fas fa-graduation-cap mr-2"></i>
                        ExamPrep Gyaan
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="darkModeToggle" class="text-white hover:text-gray-200 transition-colors">
                        <i class="fas fa-moon" id="darkModeIcon"></i>
                    </button>
                    <div class="relative">
                        <button id="toolsDropdown" class="bg-white bg-opacity-20 text-white px-4 py-2 rounded-lg hover:bg-opacity-30 transition-all flex items-center">
                            <i class="fas fa-tools mr-2"></i>
                            Tools
                            <i class="fas fa-chevron-down ml-2"></i>
                        </button>
                        <div id="toolsMenu" class="absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-lg shadow-xl hidden z-10">
                            <div class="py-2">
                                <button onclick="showTool('imageResizer')" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center">
                                    <i class="fas fa-expand-arrows-alt mr-2 text-blue-500"></i>
                                    Image Resizer
                                </button>
                                <button onclick="showTool('signatureResizer')" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center">
                                    <i class="fas fa-signature mr-2 text-green-500"></i>
                                    Signature Resizer
                                </button>
                                <button onclick="showTool('jpgToPdf')" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i>
                                    JPG to PDF
                                </button>
                                <button onclick="showTool('pdfTools')" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center">
                                    <i class="fas fa-file-alt mr-2 text-purple-500"></i>
                                    PDF Tools
                                </button>
                                <button onclick="showTool('backgroundRemover')" class="w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center">
                                    <i class="fas fa-eraser mr-2 text-orange-500"></i>
                                    Background Remover
                                </button>
                            </div>
                        </div>
                    </div>
                    <button onclick="showSection('auth')" id="authBtn" class="bg-white bg-opacity-20 text-white px-4 py-2 rounded-lg hover:bg-opacity-30 transition-all">
                        Login
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Home Section -->
        <section id="homeSection">
            <!-- Hero Section -->
            <div class="gradient-bg rounded-2xl p-8 mb-8 text-white">
                <div class="text-center">
                    <h2 class="text-4xl font-bold mb-4">Master Your Exams with AI-Powered Learning</h2>
                    <p class="text-xl mb-6 opacity-90">Practice MCQs, track progress, and get personalized AI assistance</p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <button onclick="showSection('dailyMcq')" class="bg-white text-purple-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all">
                            <i class="fas fa-question-circle mr-2"></i>
                            Daily MCQ
                        </button>
                        <button onclick="showSection('leaderboard')" class="bg-white bg-opacity-20 border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-opacity-30 transition-all">
                            <i class="fas fa-trophy mr-2"></i>
                            Leaderboard
                        </button>
                        <button onclick="showSection('geminiChat')" class="bg-white bg-opacity-20 border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-opacity-30 transition-all">
                            <i class="fas fa-robot mr-2"></i>
                            AI Assistant
                        </button>
                    </div>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg tool-card">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-brain text-2xl text-blue-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 dark:text-white">AI-Generated Questions</h3>
                        <p class="text-gray-600 dark:text-gray-300">Get unlimited practice with Gemini AI-powered questions</p>
                    </div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg tool-card">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-chart-line text-2xl text-green-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 dark:text-white">Progress Tracking</h3>
                        <p class="text-gray-600 dark:text-gray-300">Monitor your learning journey with detailed analytics</p>
                    </div>
                </div>
                <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg tool-card">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-tools text-2xl text-purple-600"></i>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 dark:text-white">Utility Tools</h3>
                        <p class="text-gray-600 dark:text-gray-300">Image resize, PDF tools, background remover & more</p>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <h3 class="text-2xl font-bold mb-6 text-center dark:text-white">Platform Statistics</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-blue-600" id="totalQuestions">2,450</div>
                        <div class="text-gray-600 dark:text-gray-300">Total Questions</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-green-600" id="activeUsers">1,230</div>
                        <div class="text-gray-600 dark:text-gray-300">Active Users</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-purple-600" id="dailyMcqs">365</div>
                        <div class="text-gray-600 dark:text-gray-300">Daily MCQs</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-orange-600" id="toolsUsed">5,678</div>
                        <div class="text-gray-600 dark:text-gray-300">Tools Used</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tool Sections -->
        <section id="imageResizer" class="tool-section">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-expand-arrows-alt mr-2 text-blue-500"></i>
                        Image Resizer
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="drag-area mb-6" id="imageUploadArea">
                    <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                    <p class="text-lg font-semibold dark:text-white mb-2">Drop your image here or click to browse</p>
                    <p class="text-gray-500 dark:text-gray-400">Supports: JPG, PNG, WEBP (Max: 10MB)</p>
                    <input type="file" id="imageInput" accept="image/*" class="hidden">
                </div>

                <div id="imageControls" class="hidden">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">Original Image</h3>
                            <img id="originalImage" class="file-preview border rounded-lg">
                            <div class="mt-2 text-sm text-gray-600 dark:text-gray-400">
                                <span id="originalDimensions"></span>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">Resized Image</h3>
                            <canvas id="resizedCanvas" class="border rounded-lg max-w-full"></canvas>
                            <div class="mt-2 text-sm text-gray-600 dark:text-gray-400">
                                <span id="newDimensions"></span>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                        <h4 class="font-semibold mb-4 dark:text-white">Resize Options</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 dark:text-white">Width (px)</label>
                                <input type="number" id="widthInput" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white" min="1" max="5000">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 dark:text-white">Height (px)</label>
                                <input type="number" id="heightInput" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white" min="1" max="5000">
                            </div>
                        </div>
                        <div class="mt-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="maintainAspectRatio" checked class="mr-2">
                                <span class="dark:text-white">Maintain aspect ratio</span>
                            </label>
                        </div>
                        <div class="mt-4">
                            <label class="block text-sm font-medium mb-2 dark:text-white">Quality</label>
                            <input type="range" id="qualitySlider" class="range-slider" min="0.1" max="1" step="0.1" value="0.9">
                            <div class="flex justify-between text-sm text-gray-500 dark:text-gray-400">
                                <span>Low</span>
                                <span id="qualityValue">90%</span>
                                <span>High</span>
                            </div>
                        </div>
                        <div class="mt-6 flex gap-4">
                            <button onclick="resizeImage()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-magic mr-2"></i>
                                Resize Image
                            </button>
                            <button onclick="downloadResizedImage()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-download mr-2"></i>
                                Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="signatureResizer" class="tool-section">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-signature mr-2 text-green-500"></i>
                        Signature Resizer
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="drag-area mb-6" id="signatureUploadArea">
                    <i class="fas fa-signature text-4xl text-gray-400 mb-4"></i>
                    <p class="text-lg font-semibold dark:text-white mb-2">Drop your signature here or click to browse</p>
                    <p class="text-gray-500 dark:text-gray-400">Optimized for signature images (Max: 5MB)</p>
                    <input type="file" id="signatureInput" accept="image/*" class="hidden">
                </div>

                <div id="signatureControls" class="hidden">
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">Original Signature</h3>
                            <img id="originalSignature" class="file-preview border rounded-lg">
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">Resized Signature</h3>
                            <canvas id="signatureCanvas" class="border rounded-lg max-w-full"></canvas>
                        </div>
                    </div>

                    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                        <h4 class="font-semibold mb-4 dark:text-white">Quick Resize Presets</h4>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-4">
                            <button onclick="setSignatureSize(200, 50)" class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-2 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800">200×50</button>
                            <button onclick="setSignatureSize(300, 75)" class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-2 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800">300×75</button>
                            <button onclick="setSignatureSize(400, 100)" class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-2 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800">400×100</button>
                            <button onclick="setSignatureSize(500, 125)" class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-3 py-2 rounded text-sm hover:bg-blue-200 dark:hover:bg-blue-800">500×125</button>
                        </div>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 dark:text-white">Width (px)</label>
                                <input type="number" id="signatureWidth" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white" value="300">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 dark:text-white">Height (px)</label>
                                <input type="number" id="signatureHeight" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white" value="75">
                            </div>
                        </div>
                        <div class="mt-6 flex gap-4">
                            <button onclick="resizeSignature()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-magic mr-2"></i>
                                Resize Signature
                            </button>
                            <button onclick="downloadSignature()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-download mr-2"></i>
                                Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="jpgToPdf" class="tool-section">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-file-pdf mr-2 text-red-500"></i>
                        JPG to PDF Converter
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="drag-area mb-6" id="pdfUploadArea">
                    <i class="fas fa-images text-4xl text-gray-400 mb-4"></i>
                    <p class="text-lg font-semibold dark:text-white mb-2">Drop images here or click to browse</p>
                    <p class="text-gray-500 dark:text-gray-400">Select multiple images to create a PDF</p>
                    <input type="file" id="pdfImageInput" accept="image/*" multiple class="hidden">
                </div>

                <div id="imageList" class="hidden mb-6">
                    <h3 class="text-lg font-semibold mb-4 dark:text-white">Selected Images</h3>
                    <div id="imagePreviewContainer" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4"></div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                        <h4 class="font-semibold mb-4 dark:text-white">PDF Settings</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 dark:text-white">Page Size</label>
                                <select id="pageSize" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                                    <option value="A4">A4 (210 × 297 mm)</option>
                                    <option value="Letter">Letter (8.5 × 11 in)</option>
                                    <option value="A3">A3 (297 × 420 mm)</option>
                                    <option value="A5">A5 (148 × 210 mm)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 dark:text-white">Orientation</label>
                                <select id="orientation" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                                    <option value="portrait">Portrait</option>
                                    <option value="landscape">Landscape</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-4">
                            <label class="block text-sm font-medium mb-2 dark:text-white">Margin (px)</label>
                            <input type="number" id="pdfMargin" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white" value="20" min="0" max="100">
                        </div>
                        <div class="mt-6 flex gap-4">
                            <button onclick="convertToPdf()" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors">
                                <i class="fas fa-file-pdf mr-2"></i>
                                Convert to PDF
                            </button>
                            <button onclick="clearImageList()" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                                <i class="fas fa-trash mr-2"></i>
                                Clear All
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="pdfTools" class="tool-section">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-file-alt mr-2 text-purple-500"></i>
                        PDF Tools
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <button onclick="showPdfTool('split')" class="bg-blue-100 dark:bg-blue-900 p-6 rounded-lg text-center hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors">
                        <i class="fas fa-cut text-3xl text-blue-600 mb-4"></i>
                        <h3 class="font-semibold dark:text-white">Split PDF</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">Split PDF into individual pages</p>
                    </button>
                    <button onclick="showPdfTool('merge')" class="bg-green-100 dark:bg-green-900 p-6 rounded-lg text-center hover:bg-green-200 dark:hover:bg-green-800 transition-colors">
                        <i class="fas fa-object-group text-3xl text-green-600 mb-4"></i>
                        <h3 class="font-semibold dark:text-white">Merge PDF</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">Combine multiple PDFs into one</p>
                    </button>
                    <button onclick="showPdfTool('compress')" class="bg-orange-100 dark:bg-orange-900 p-6 rounded-lg text-center hover:bg-orange-200 dark:hover:bg-orange-800 transition-colors">
                        <i class="fas fa-compress text-3xl text-orange-600 mb-4"></i>
                        <h3 class="font-semibold dark:text-white">Compress PDF</h3>
                        <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">Reduce PDF file size</p>
                    </button>
                </div>

                <div id="pdfSplitTool" class="pdf-tool hidden">
                    <h3 class="text-lg font-semibold mb-4 dark:text-white">Split PDF</h3>
                    <div class="drag-area mb-4" id="splitPdfUpload">
                        <i class="fas fa-file-pdf text-4xl text-gray-400 mb-4"></i>
                        <p class="text-lg font-semibold dark:text-white mb-2">Drop PDF file here</p>
                        <input type="file" id="splitPdfInput" accept=".pdf" class="hidden">
                    </div>
                    <div id="splitControls" class="hidden">
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                            <p class="dark:text-white mb-4">PDF loaded: <span id="splitPdfInfo"></span></p>
                            <button onclick="splitPdf()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                <i class="fas fa-cut mr-2"></i>
                                Split into Pages
                            </button>
                        </div>
                    </div>
                </div>

                <div id="pdfMergeTool" class="pdf-tool hidden">
                    <h3 class="text-lg font-semibold mb-4 dark:text-white">Merge PDFs</h3>
                    <div class="drag-area mb-4" id="mergePdfUpload">
                        <i class="fas fa-files text-4xl text-gray-400 mb-4"></i>
                        <p class="text-lg font-semibold dark:text-white mb-2">Drop multiple PDF files here</p>
                        <input type="file" id="mergePdfInput" accept=".pdf" multiple class="hidden">
                    </div>
                    <div id="mergeControls" class="hidden">
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                            <h4 class="font-semibold mb-4 dark:text-white">Selected PDFs</h4>
                            <div id="mergePdfList" class="mb-4"></div>
                            <button onclick="mergePdfs()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                <i class="fas fa-object-group mr-2"></i>
                                Merge PDFs
                            </button>
                        </div>
                    </div>
                </div>

                <div id="pdfCompressTool" class="pdf-tool hidden">
                    <h3 class="text-lg font-semibold mb-4 dark:text-white">Compress PDF</h3>
                    <div class="drag-area mb-4" id="compressPdfUpload">
                        <i class="fas fa-file-pdf text-4xl text-gray-400 mb-4"></i>
                        <p class="text-lg font-semibold dark:text-white mb-2">Drop PDF file here</p>
                        <input type="file" id="compressPdfInput" accept=".pdf" class="hidden">
                    </div>
                    <div id="compressControls" class="hidden">
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                            <p class="dark:text-white mb-4">PDF loaded: <span id="compressPdfInfo"></span></p>
                            <div class="mb-4">
                                <label class="block text-sm font-medium mb-2 dark:text-white">Compression Level</label>
                                <select id="compressionLevel" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white">
                                    <option value="low">Low (Better Quality)</option>
                                    <option value="medium" selected>Medium (Balanced)</option>
                                    <option value="high">High (Smaller Size)</option>
                                </select>
                            </div>
                            <button onclick="compressPdf()" class="bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors">
                                <i class="fas fa-compress mr-2"></i>
                                Compress PDF
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="backgroundRemover" class="tool-section">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-eraser mr-2 text-orange-500"></i>
                        Background Remover
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 p-4 mb-6">
                    <div class="flex">
                        <i class="fas fa-exclamation-triangle text-yellow-500 mr-2 mt-1"></i>
                        <div>
                            <p class="dark:text-white font-semibold">API Configuration Required</p>
                            <p class="text-sm text-yellow-700 dark:text-yellow-200 mt-1">This tool requires a Remove.bg API key. Please configure it in the settings.</p>
                        </div>
                    </div>
                </div>

                <div class="drag-area mb-6" id="bgRemovalUploadArea">
                    <i class="fas fa-user-slash text-4xl text-gray-400 mb-4"></i>
                    <p class="text-lg font-semibold dark:text-white mb-2">Drop your image here or click to browse</p>
                    <p class="text-gray-500 dark:text-gray-400">Remove background from photos automatically</p>
                    <input type="file" id="bgRemovalInput" accept="image/*" class="hidden">
                </div>

                <div id="bgRemovalControls" class="hidden">
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">Original Image</h3>
                            <img id="originalBgImage" class="file-preview border rounded-lg">
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold mb-4 dark:text-white">Background Removed</h3>
                            <div id="processedBgImage" class="border rounded-lg bg-gray-100 dark:bg-gray-700 min-h-48 flex items-center justify-center">
                                <span class="text-gray-500 dark:text-gray-400">Processed image will appear here</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-2 dark:text-white">Remove.bg API Key</label>
                            <input type="password" id="removeBgApiKey" class="w-full p-2 border rounded-lg dark:bg-gray-600 dark:border-gray-500 dark:text-white" placeholder="Enter your API key">
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Get your free API key from <a href="https://www.remove.bg/api" target="_blank" class="text-blue-500 hover:underline">remove.bg</a></p>
                        </div>
                        <div class="flex gap-4">
                            <button onclick="removeBackground()" class="bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700 transition-colors">
                                <i class="fas fa-eraser mr-2"></i>
                                Remove Background
                            </button>
                            <button onclick="downloadProcessedImage()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors hidden" id="downloadBgBtn">
                                <i class="fas fa-download mr-2"></i>
                                Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Auth Section -->
        <section id="authSection" class="hidden">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-xl p-8 shadow-lg">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold dark:text-white">Welcome Back</h2>
                    <p class="text-gray-600 dark:text-gray-300 mt-2">Sign in to track your progress</p>
                </div>
                
                <div id="loginForm">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2 dark:text-white">Email</label>
                        <input type="email" id="loginEmail" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Enter your email">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2 dark:text-white">Password</label>
                        <input type="password" id="loginPassword" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Enter your password">
                    </div>
                    <button onclick="handleLogin()" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold">
                        Sign In
                    </button>
                    <p class="text-center mt-4 text-gray-600 dark:text-gray-300">
                        Don't have an account? 
                        <button onclick="showRegister()" class="text-purple-600 hover:underline">Sign up</button>
                    </p>
                </div>

                <div id="registerForm" class="hidden">
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2 dark:text-white">Full Name</label>
                        <input type="text" id="registerName" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Enter your name">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium mb-2 dark:text-white">Email</label>
                        <input type="email" id="registerEmail" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Enter your email">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2 dark:text-white">Password</label>
                        <input type="password" id="registerPassword" class="w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white" placeholder="Create a password">
                    </div>
                    <button onclick="handleRegister()" class="w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-colors font-semibold">
                        Sign Up
                    </button>
                    <p class="text-center mt-4 text-gray-600 dark:text-gray-300">
                        Already have an account? 
                        <button onclick="showLogin()" class="text-purple-600 hover:underline">Sign in</button>
                    </p>
                </div>
            </div>
        </section>

        <!-- Daily MCQ Section -->
        <section id="dailyMcqSection" class="hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-question-circle mr-2 text-blue-500"></i>
                        Daily MCQ Challenge
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <div id="mcqContainer">
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-6 mb-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-xl font-semibold">Today's Challenge</h3>
                                <p class="opacity-90">Test your knowledge with our daily question</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold" id="mcqTimer">30</div>
                                <div class="text-sm opacity-75">seconds</div>
                            </div>
                        </div>
                    </div>

                    <div id="mcqQuestion" class="mb-6">
                        <h3 class="text-lg font-semibold mb-4 dark:text-white">What is the capital of France?</h3>
                        <div class="space-y-3">
                            <button class="mcq-option w-full text-left p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg dark:text-white" onclick="selectOption(this, 'A')">
                                <span class="font-semibold mr-2">A.</span> London
                            </button>
                            <button class="mcq-option w-full text-left p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg dark:text-white" onclick="selectOption(this, 'B')">
                                <span class="font-semibold mr-2">B.</span> Berlin
                            </button>
                            <button class="mcq-option w-full text-left p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg dark:text-white" onclick="selectOption(this, 'C')">
                                <span class="font-semibold mr-2">C.</span> Paris
                            </button>
                            <button class="mcq-option w-full text-left p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg dark:text-white" onclick="selectOption(this, 'D')">
                                <span class="font-semibold mr-2">D.</span> Madrid
                            </button>
                        </div>
                    </div>

                    <div class="flex justify-between items-center">
                        <button onclick="submitAnswer()" id="submitBtn" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold disabled:opacity-50" disabled>
                            Submit Answer
                        </button>
                        <button onclick="bookmarkQuestion()" class="text-gray-500 hover:text-yellow-500 dark:text-gray-400 dark:hover:text-yellow-400 transition-colors">
                            <i class="fas fa-bookmark text-xl"></i>
                        </button>
                    </div>
                </div>

                <div id="mcqResult" class="hidden">
                    <div class="text-center">
                        <div id="resultIcon" class="text-6xl mb-4">🎉</div>
                        <h3 id="resultText" class="text-2xl font-bold mb-4 dark:text-white">Correct!</h3>
                        <p id="resultExplanation" class="text-gray-600 dark:text-gray-300 mb-6">Paris is the capital and largest city of France.</p>
                        <div class="flex justify-center gap-4">
                            <button onclick="nextQuestion()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                                Next Question
                            </button>
                            <button onclick="showSection('leaderboard')" class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">
                                View Leaderboard
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Leaderboard Section -->
        <section id="leaderboardSection" class="hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-trophy mr-2 text-yellow-500"></i>
                        Leaderboard
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="text-center">
                        <div class="w-20 h-20 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-crown text-2xl text-yellow-600"></i>
                        </div>
                        <div class="text-2xl font-bold text-yellow-600">#1</div>
                        <div class="font-semibold dark:text-white">Alex Chen</div>
                        <div class="text-gray-600 dark:text-gray-300">2,450 XP</div>
                    </div>
                    <div class="text-center">
                        <div class="w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-medal text-2xl text-gray-600"></i>
                        </div>
                        <div class="text-2xl font-bold text-gray-600">#2</div>
                        <div class="font-semibold dark:text-white">Sarah Johnson</div>
                        <div class="text-gray-600 dark:text-gray-300">2,120 XP</div>
                    </div>
                    <div class="text-center">
                        <div class="w-20 h-20 bg-orange-100 dark:bg-orange-900 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-award text-2xl text-orange-600"></i>
                        </div>
                        <div class="text-2xl font-bold text-orange-600">#3</div>
                        <div class="font-semibold dark:text-white">Mike Davis</div>
                        <div class="text-gray-600 dark:text-gray-300">1,890 XP</div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div class="leaderboard-item flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mr-4">
                                <span class="text-sm font-bold text-purple-600">4</span>
                            </div>
                            <div>
                                <div class="font-semibold dark:text-white">Emma Wilson</div>
                                <div class="text-sm text-gray-600 dark:text-gray-300">Level 12 • 45 day streak</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold dark:text-white">1,650 XP</div>
                            <div class="text-sm text-gray-600 dark:text-gray-300">92% accuracy</div>
                        </div>
                    </div>
                    <div class="leaderboard-item flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center mr-4">
                                <span class="text-sm font-bold text-purple-600">5</span>
                            </div>
                            <div>
                                <div class="font-semibold dark:text-white">David Brown</div>
                                <div class="text-sm text-gray-600 dark:text-gray-300">Level 11 • 23 day streak</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold dark:text-white">1,420 XP</div>
                            <div class="text-sm text-gray-600 dark:text-gray-300">88% accuracy</div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 bg-blue-50 dark:bg-blue-900 rounded-lg p-6">
                    <h3 class="font-semibold mb-4 dark:text-white">Your Stats</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-600">856</div>
                            <div class="text-sm text-gray-600 dark:text-gray-300">Your XP</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600">15</div>
                            <div class="text-sm text-gray-600 dark:text-gray-300">Day Streak</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600">8</div>
                            <div class="text-sm text-gray-600 dark:text-gray-300">Your Level</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-orange-600">84%</div>
                            <div class="text-sm text-gray-600 dark:text-gray-300">Accuracy</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bookmarks Section -->
        <section id="bookmarksSection" class="hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-bookmark mr-2 text-yellow-500"></i>
                        Bookmarked Questions
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <div class="space-y-4">
                    <div class="border dark:border-gray-600 rounded-lg p-4">
                        <h3 class="font-semibold mb-2 dark:text-white">What is the chemical symbol for gold?</h3>
                        <div class="text-sm text-gray-600 dark:text-gray-300 mb-2">Category: Chemistry • Difficulty: Easy</div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-semibold">✓ Correct Answer: Au</span>
                            <button class="text-red-500 hover:text-red-700">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="border dark:border-gray-600 rounded-lg p-4">
                        <h3 class="font-semibold mb-2 dark:text-white">Who wrote "To Kill a Mockingbird"?</h3>
                        <div class="text-sm text-gray-600 dark:text-gray-300 mb-2">Category: Literature • Difficulty: Medium</div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-600 font-semibold">✓ Correct Answer: Harper Lee</span>
                            <button class="text-red-500 hover:text-red-700">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gemini Chat Section -->
        <section id="geminiChatSection" class="hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold dark:text-white">
                        <i class="fas fa-robot mr-2 text-blue-500"></i>
                        AI Study Assistant
                    </h2>
                    <button onclick="showSection('home')" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <div id="chatContainer" class="h-96 overflow-y-auto border dark:border-gray-600 rounded-lg p-4 mb-4 bg-gray-50 dark:bg-gray-700">
                    <div class="chat-message mb-4">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                                <i class="fas fa-robot text-white text-sm"></i>
                            </div>
                            <div class="bg-white dark:bg-gray-600 rounded-lg p-3 max-w-xs">
                                <p class="dark:text-white">Hello! I'm your AI study assistant. I can help you with questions, explanations, and study tips. What would you like to learn about?</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex gap-2">
                    <input type="text" id="chatInput" class="flex-1 p-3 border dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white" placeholder="Ask me anything about your studies..." onkeypress="if(event.key==='Enter') sendMessage()">
                    <button onclick="sendMessage()" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>

                <div class="mt-4 flex flex-wrap gap-2">
                    <button onclick="quickQuestion('Explain photosynthesis')" class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-600">
                        Explain photosynthesis
                    </button>
                    <button onclick="quickQuestion('Math formulas for calculus')" class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-600">
                        Math formulas
                    </button>
                    <button onclick="quickQuestion('History of World War 2')" class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full text-sm hover:bg-gray-200 dark:hover:bg-gray-600">
                        World War 2
                    </button>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboardSection" class="hidden">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-lg">
                <h2 class="text-2xl font-bold mb-6 dark:text-white">Dashboard</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg p-6">
                        <h3 class="text-lg font-semibold mb-2">Questions Answered</h3>
                        <div class="text-3xl font-bold">127</div>
                        <div class="text-blue-100">This week: +23</div>
                    </div>
                    <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg p-6">
                        <h3 class="text-lg font-semibold mb-2">Accuracy Rate</h3>
                        <div class="text-3xl font-bold">84%</div>
                        <div class="text-green-100">+2% from last week</div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg p-6">
                        <h3 class="text-lg font-semibold mb-2">Study Streak</h3>
                        <div class="text-3xl font-bold">15 days</div>
                        <div class="text-purple-100">Keep it up!</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-4">ExamPrep Gyaan</h3>
                    <p class="text-gray-300">Your AI-powered companion for exam preparation and learning.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Features</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li>Daily MCQs</li>
                        <li>AI Assistant</li>
                        <li>Progress Tracking</li>
                        <li>Leaderboards</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Tools</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li>Image Resizer</li>
                        <li>PDF Converter</li>
                        <li>Background Remover</li>
                        <li>File Utilities</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Support</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="#" class="hover:text-white">About</a></li>
                        <li><a href="#" class="hover:text-white">Terms</a></li>
                        <li><a href="#" class="hover:text-white">Contact</a></li>
                        <li><a href="#" class="hover:text-white">Help</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 pt-6 mt-6 text-center text-gray-300">
                <p>&copy; 2024 ExamPrep Gyaan. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global variables
        let currentUser = null;
        let selectedAnswer = null;
        let mcqTimer = null;
        let timeLeft = 30;
        let currentQuestion = {
            question: "What is the capital of France?",
            options: ["London", "Berlin", "Paris", "Madrid"],
            correct: "C",
            explanation: "Paris is the capital and largest city of France."
        };

        // Dark mode functionality
        function initDarkMode() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            const darkModeIcon = document.getElementById('darkModeIcon');
            const body = document.body;

            // Check for saved theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                body.classList.add('dark');
                darkModeIcon.classList.replace('fa-moon', 'fa-sun');
            }

            darkModeToggle.addEventListener('click', () => {
                body.classList.toggle('dark');
                if (body.classList.contains('dark')) {
                    darkModeIcon.classList.replace('fa-moon', 'fa-sun');
                    localStorage.setItem('theme', 'dark');
                } else {
                    darkModeIcon.classList.replace('fa-sun', 'fa-moon');
                    localStorage.setItem('theme', 'light');
                }
            });
        }

        // Navigation functions
        function showSection(section) {
            // Hide all sections
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById('homeSection').style.display = 'none';
            
            // Hide tool sections
            document.querySelectorAll('.tool-section').forEach(s => s.classList.remove('active'));
            
            // Show requested section
            if (section === 'home') {
                document.getElementById('homeSection').style.display = 'block';
            } else if (section === 'auth') {
                document.getElementById('authSection').classList.remove('hidden');
            } else if (section === 'dailyMcq') {
                document.getElementById('dailyMcqSection').classList.remove('hidden');
                startMcqTimer();
            } else if (section === 'leaderboard') {
                document.getElementById('leaderboardSection').classList.remove('hidden');
            } else if (section === 'bookmarks') {
                document.getElementById('bookmarksSection').classList.remove('hidden');
            } else if (section === 'geminiChat') {
                document.getElementById('geminiChatSection').classList.remove('hidden');
            } else if (section === 'dashboard') {
                document.getElementById('dashboardSection').classList.remove('hidden');
            }
        }

        function showTool(tool) {
            // Hide all sections and show tool
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById('homeSection').style.display = 'none';
            document.querySelectorAll('.tool-section').forEach(s => s.classList.remove('active'));
            
            document.getElementById(tool).classList.add('active');
            document.getElementById('toolsMenu').classList.add('hidden');
        }

        // Tools dropdown functionality
        function initToolsDropdown() {
            const dropdown = document.getElementById('toolsDropdown');
            const menu = document.getElementById('toolsMenu');

            dropdown.addEventListener('click', (e) => {
                e.stopPropagation();
                menu.classList.toggle('hidden');
            });

            document.addEventListener('click', () => {
                menu.classList.add('hidden');
            });
        }

        // Image Resizer functionality
        function initImageResizer() {
            const uploadArea = document.getElementById('imageUploadArea');
            const imageInput = document.getElementById('imageInput');
            const imageControls = document.getElementById('imageControls');
            const originalImage = document.getElementById('originalImage');
            const widthInput = document.getElementById('widthInput');
            const heightInput = document.getElementById('heightInput');
            const maintainAspectRatio = document.getElementById('maintainAspectRatio');
            const qualitySlider = document.getElementById('qualitySlider');
            const qualityValue = document.getElementById('qualityValue');

            // Drag and drop functionality
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleImageUpload(files[0]);
                }
            });

            uploadArea.addEventListener('click', () => {
                imageInput.click();
            });

            imageInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleImageUpload(e.target.files[0]);
                }
            });

            // Quality slider
            qualitySlider.addEventListener('input', (e) => {
                qualityValue.textContent = Math.round(e.target.value * 100) + '%';
            });

            // Maintain aspect ratio
            widthInput.addEventListener('input', () => {
                if (maintainAspectRatio.checked && originalImage.naturalWidth) {
                    const ratio = originalImage.naturalHeight / originalImage.naturalWidth;
                    heightInput.value = Math.round(widthInput.value * ratio);
                }
            });

            heightInput.addEventListener('input', () => {
                if (maintainAspectRatio.checked && originalImage.naturalHeight) {
                    const ratio = originalImage.naturalWidth / originalImage.naturalHeight;
                    widthInput.value = Math.round(heightInput.value * ratio);
                }
            });
        }

        function handleImageUpload(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please select an image file');
                return;
            }

            if (file.size > 10 * 1024 * 1024) {
                alert('File size must be less than 10MB');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                const originalImage = document.getElementById('originalImage');
                originalImage.src = e.target.result;
                originalImage.onload = () => {
                    document.getElementById('widthInput').value = originalImage.naturalWidth;
                    document.getElementById('heightInput').value = originalImage.naturalHeight;
                    document.getElementById('originalDimensions').textContent = 
                        `${originalImage.naturalWidth} × ${originalImage.naturalHeight} px`;
                    document.getElementById('imageControls').classList.remove('hidden');
                };
            };
            reader.readAsDataURL(file);
        }

        function resizeImage() {
            const originalImage = document.getElementById('originalImage');
            const canvas = document.getElementById('resizedCanvas');
            const ctx = canvas.getContext('2d');
            const width = parseInt(document.getElementById('widthInput').value);
            const height = parseInt(document.getElementById('heightInput').value);
            const quality = parseFloat(document.getElementById('qualitySlider').value);

            canvas.width = width;
            canvas.height = height;

            ctx.drawImage(originalImage, 0, 0, width, height);
            
            document.getElementById('newDimensions').textContent = `${width} × ${height} px`;
        }

        function downloadResizedImage() {
            const canvas = document.getElementById('resizedCanvas');
            const quality = parseFloat(document.getElementById('qualitySlider').value);
            
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'resized-image.jpg';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 'image/jpeg', quality);
        }

        // Signature Resizer functionality
        function initSignatureResizer() {
            const uploadArea = document.getElementById('signatureUploadArea');
            const signatureInput = document.getElementById('signatureInput');
            const signatureControls = document.getElementById('signatureControls');

            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleSignatureUpload(files[0]);
                }
            });

            uploadArea.addEventListener('click', () => {
                signatureInput.click();
            });

            signatureInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleSignatureUpload(e.target.files[0]);
                }
            });
        }

        function handleSignatureUpload(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please select an image file');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                const originalSignature = document.getElementById('originalSignature');
                originalSignature.src = e.target.result;
                document.getElementById('signatureControls').classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        }

        function setSignatureSize(width, height) {
            document.getElementById('signatureWidth').value = width;
            document.getElementById('signatureHeight').value = height;
        }

        function resizeSignature() {
            const originalSignature = document.getElementById('originalSignature');
            const canvas = document.getElementById('signatureCanvas');
            const ctx = canvas.getContext('2d');
            const width = parseInt(document.getElementById('signatureWidth').value);
            const height = parseInt(document.getElementById('signatureHeight').value);

            canvas.width = width;
            canvas.height = height;

            ctx.drawImage(originalSignature, 0, 0, width, height);
        }

        function downloadSignature() {
            const canvas = document.getElementById('signatureCanvas');
            
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'resized-signature.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 'image/png');
        }

        // JPG to PDF functionality
        function initJpgToPdf() {
            const uploadArea = document.getElementById('pdfUploadArea');
            const pdfImageInput = document.getElementById('pdfImageInput');
            const imageList = document.getElementById('imageList');
            let selectedImages = [];

            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = Array.from(e.dataTransfer.files);
                handlePdfImageUpload(files);
            });

            uploadArea.addEventListener('click', () => {
                pdfImageInput.click();
            });

            pdfImageInput.addEventListener('change', (e) => {
                const files = Array.from(e.target.files);
                handlePdfImageUpload(files);
            });
        }

        function handlePdfImageUpload(files) {
            const imageFiles = files.filter(file => file.type.startsWith('image/'));
            if (imageFiles.length === 0) {
                alert('Please select image files');
                return;
            }

            const previewContainer = document.getElementById('imagePreviewContainer');
            previewContainer.innerHTML = '';

            imageFiles.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const div = document.createElement('div');
                    div.className = 'relative';
                    div.innerHTML = `
                        <img src="${e.target.result}" class="w-full h-24 object-cover rounded border">
                        <button onclick="removeImage(${index})" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs">×</button>
                        <p class="text-xs text-gray-600 dark:text-gray-300 mt-1 truncate">${file.name}</p>
                    `;
                    previewContainer.appendChild(div);
                };
                reader.readAsDataURL(file);
            });

            selectedImages = imageFiles;
            document.getElementById('imageList').classList.remove('hidden');
        }

        function removeImage(index) {
            selectedImages.splice(index, 1);
            if (selectedImages.length === 0) {
                document.getElementById('imageList').classList.add('hidden');
            } else {
                handlePdfImageUpload(selectedImages);
            }
        }

        function clearImageList() {
            selectedImages = [];
            document.getElementById('imageList').classList.add('hidden');
        }

        async function convertToPdf() {
            if (selectedImages.length === 0) {
                alert('Please select images first');
                return;
            }

            const { PDFDocument } = PDFLib;
            const pdfDoc = await PDFDocument.create();
            const pageSize = document.getElementById('pageSize').value;
            const orientation = document.getElementById('orientation').value;
            const margin = parseInt(document.getElementById('pdfMargin').value);

            // Define page dimensions
            let pageWidth, pageHeight;
            switch (pageSize) {
                case 'A4':
                    pageWidth = 595;
                    pageHeight = 842;
                    break;
                case 'Letter':
                    pageWidth = 612;
                    pageHeight = 792;
                    break;
                case 'A3':
                    pageWidth = 842;
                    pageHeight = 1191;
                    break;
                case 'A5':
                    pageWidth = 420;
                    pageHeight = 595;
                    break;
            }

            if (orientation === 'landscape') {
                [pageWidth, pageHeight] = [pageHeight, pageWidth];
            }

            for (const imageFile of selectedImages) {
                const page = pdfDoc.addPage([pageWidth, pageHeight]);
                const imageBytes = await imageFile.arrayBuffer();
                
                let image;
                if (imageFile.type === 'image/jpeg') {
                    image = await pdfDoc.embedJpg(imageBytes);
                } else if (imageFile.type === 'image/png') {
                    image = await pdfDoc.embedPng(imageBytes);
                } else {
                    continue; // Skip unsupported formats
                }

                const imageDims = image.scale(1);
                const availableWidth = pageWidth - (2 * margin);
                const availableHeight = pageHeight - (2 * margin);

                // Calculate scaled dimensions to fit page
                let scaledWidth = imageDims.width;
                let scaledHeight = imageDims.height;

                if (scaledWidth > availableWidth) {
                    const scale = availableWidth / scaledWidth;
                    scaledWidth = availableWidth;
                    scaledHeight = scaledHeight * scale;
                }

                if (scaledHeight > availableHeight) {
                    const scale = availableHeight / scaledHeight;
                    scaledHeight = availableHeight;
                    scaledWidth = scaledWidth * scale;
                }

                const x = (pageWidth - scaledWidth) / 2;
                const y = (pageHeight - scaledHeight) / 2;

                page.drawImage(image, {
                    x: x,
                    y: y,
                    width: scaledWidth,
                    height: scaledHeight,
                });
            }

            const pdfBytes = await pdfDoc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'converted-images.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // PDF Tools functionality
        function showPdfTool(tool) {
            document.querySelectorAll('.pdf-tool').forEach(t => t.classList.add('hidden'));
            document.getElementById(`pdf${tool.charAt(0).toUpperCase() + tool.slice(1)}Tool`).classList.remove('hidden');
        }

        function initPdfTools() {
            // Split PDF
            const splitUpload = document.getElementById('splitPdfUpload');
            const splitInput = document.getElementById('splitPdfInput');

            splitUpload.addEventListener('click', () => splitInput.click());
            splitInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleSplitPdfUpload(e.target.files[0]);
                }
            });

            // Merge PDF
            const mergeUpload = document.getElementById('mergePdfUpload');
            const mergeInput = document.getElementById('mergePdfInput');

            mergeUpload.addEventListener('click', () => mergeInput.click());
            mergeInput.addEventListener('change', (e) => {
                handleMergePdfUpload(Array.from(e.target.files));
            });

            // Compress PDF
            const compressUpload = document.getElementById('compressPdfUpload');
            const compressInput = document.getElementById('compressPdfInput');

            compressUpload.addEventListener('click', () => compressInput.click());
            compressInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleCompressPdfUpload(e.target.files[0]);
                }
            });
        }

        function handleSplitPdfUpload(file) {
            if (file.type !== 'application/pdf') {
                alert('Please select a PDF file');
                return;
            }

            document.getElementById('splitPdfInfo').textContent = file.name;
            document.getElementById('splitControls').classList.remove('hidden');
        }

        async function splitPdf() {
            const fileInput = document.getElementById('splitPdfInput');
            if (!fileInput.files[0]) return;

            const file = fileInput.files[0];
            const { PDFDocument } = PDFLib;
            
            const arrayBuffer = await file.arrayBuffer();
            const pdfDoc = await PDFDocument.load(arrayBuffer);
            const pageCount = pdfDoc.getPageCount();

            const zip = new JSZip();

            for (let i = 0; i < pageCount; i++) {
                const newPdf = await PDFDocument.create();
                const [copiedPage] = await newPdf.copyPages(pdfDoc, [i]);
                newPdf.addPage(copiedPage);
                
                const pdfBytes = await newPdf.save();
                zip.file(`page-${i + 1}.pdf`, pdfBytes);
            }

            const zipBlob = await zip.generateAsync({ type: 'blob' });
            const url = URL.createObjectURL(zipBlob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'split-pages.zip';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function handleMergePdfUpload(files) {
            const pdfFiles = files.filter(file => file.type === 'application/pdf');
            if (pdfFiles.length === 0) {
                alert('Please select PDF files');
                return;
            }

            const list = document.getElementById('mergePdfList');
            list.innerHTML = '';

            pdfFiles.forEach((file, index) => {
                const div = document.createElement('div');
                div.className = 'flex justify-between items-center p-2 bg-gray-100 dark:bg-gray-600 rounded mb-2';
                div.innerHTML = `
                    <span class="dark:text-white">${file.name}</span>
                    <button onclick="removePdfFromMerge(${index})" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                list.appendChild(div);
            });

            window.mergePdfFiles = pdfFiles;
            document.getElementById('mergeControls').classList.remove('hidden');
        }

        async function mergePdfs() {
            if (!window.mergePdfFiles || window.mergePdfFiles.length === 0) {
                alert('Please select PDF files first');
                return;
            }

            const { PDFDocument } = PDFLib;
            const mergedPdf = await PDFDocument.create();

            for (const file of window.mergePdfFiles) {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await PDFDocument.load(arrayBuffer);
                const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                copiedPages.forEach((page) => mergedPdf.addPage(page));
            }

            const pdfBytes = await mergedPdf.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'merged-document.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function handleCompressPdfUpload(file) {
            if (file.type !== 'application/pdf') {
                alert('Please select a PDF file');
                return;
            }

            const fileSize = (file.size / 1024 / 1024).toFixed(2);
            document.getElementById('compressPdfInfo').textContent = `${file.name} (${fileSize} MB)`;
            document.getElementById('compressControls').classList.remove('hidden');
        }

        async function compressPdf() {
            const fileInput = document.getElementById('compressPdfInput');
            if (!fileInput.files[0]) return;

            const file = fileInput.files[0];
            const compressionLevel = document.getElementById('compressionLevel').value;
            
            // Note: This is a simplified compression - real compression would require more advanced techniques
            const { PDFDocument } = PDFLib;
            const arrayBuffer = await file.arrayBuffer();
            const pdfDoc = await PDFDocument.load(arrayBuffer);
            
            // Basic compression by re-saving (actual compression depends on PDF-lib capabilities)
            const pdfBytes = await pdfDoc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            
            const originalSize = (file.size / 1024 / 1024).toFixed(2);
            const newSize = (blob.size / 1024 / 1024).toFixed(2);
            
            alert(`Compression complete!\nOriginal: ${originalSize} MB\nCompressed: ${newSize} MB`);
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'compressed.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Background Remover functionality
        function initBackgroundRemover() {
            const uploadArea = document.getElementById('bgRemovalUploadArea');
            const bgInput = document.getElementById('bgRemovalInput');

            uploadArea.addEventListener('click', () => bgInput.click());
            bgInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleBgRemovalUpload(e.target.files[0]);
                }
            });
        }

        function handleBgRemovalUpload(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please select an image file');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                const originalBgImage = document.getElementById('originalBgImage');
                originalBgImage.src = e.target.result;
                document.getElementById('bgRemovalControls').classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        }

        async function removeBackground() {
            const apiKey = document.getElementById('4USm5URue35njhebJUUkzG4Z').value;
            if (!apiKey) {
                alert('Please enter your Remove.bg API key');
                return;
            }

            const fileInput = document.getElementById('bgRemovalInput');
            if (!fileInput.files[0]) return;

            const formData = new FormData();
            formData.append('image_file', fileInput.files[0]);
            formData.append('size', 'auto');

            try {
                const response = await fetch('https://api.remove.bg/v1.0/removebg', {
                    method: 'POST',
                    headers: {
                        'X-Api-Key': apiKey,
                    },
                    body: formData,
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = URL.createObjectURL(blob);
                    
                    const processedDiv = document.getElementById('processedBgImage');
                    processedDiv.innerHTML = `<img src="${url}" class="file-preview border rounded-lg">`;
                    
                    // Store the blob for download
                    window.processedImageBlob = blob;
                    document.getElementById('downloadBgBtn').classList.remove('hidden');
                } else {
                    const error = await response.json();
                    alert(`Error: ${error.errors[0].title}`);
                }
            } catch (error) {
                alert('Error processing image. Please check your API key and try again.');
            }
        }

        function downloadProcessedImage() {
            if (window.processedImageBlob) {
                const url = URL.createObjectURL(window.processedImageBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'background-removed.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        }

        // Authentication functions
        function showLogin() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('registerForm').classList.add('hidden');
        }

        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please fill in all fields');
                return;
            }

            // Simulate login
            currentUser = { email, name: 'User' };
            document.getElementById('authBtn').textContent = 'Dashboard';
            document.getElementById('authBtn').onclick = () => showSection('dashboard');
            showSection('home');
            alert('Login successful!');
        }

        function handleRegister() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (!name || !email || !password) {
                alert('Please fill in all fields');
                return;
            }

            // Simulate registration
            currentUser = { email, name };
            document.getElementById('authBtn').textContent = 'Dashboard';
            document.getElementById('authBtn').onclick = () => showSection('dashboard');
            showSection('home');
            alert('Registration successful!');
        }

        // MCQ functionality
        function startMcqTimer() {
            timeLeft = 30;
            const timerElement = document.getElementById('mcqTimer');
            
            mcqTimer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(mcqTimer);
                    submitAnswer();
                }
            }, 1000);
        }

        function selectOption(element, option) {
            document.querySelectorAll('.mcq-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedAnswer = option;
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            clearInterval(mcqTimer);
            
            const options = document.querySelectorAll('.mcq-option');
            options.forEach((opt, index) => {
                const optionLetter = String.fromCharCode(65 + index);
                if (optionLetter === currentQuestion.correct) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected') && optionLetter !== currentQuestion.correct) {
                    opt.classList.add('incorrect');
                }
            });

            setTimeout(() => {
                document.getElementById('mcqContainer').classList.add('hidden');
                document.getElementById('mcqResult').classList.remove('hidden');
                
                if (selectedAnswer === currentQuestion.correct) {
                    document.getElementById('resultIcon').textContent = '🎉';
                    document.getElementById('resultText').textContent = 'Correct!';
                    document.getElementById('resultText').className = 'text-2xl font-bold mb-4 text-green-600';
                } else {
                    document.getElementById('resultIcon').textContent = '😔';
                    document.getElementById('resultText').textContent = 'Incorrect';
                    document.getElementById('resultText').className = 'text-2xl font-bold mb-4 text-red-600';
                }
                
                document.getElementById('resultExplanation').textContent = currentQuestion.explanation;
            }, 2000);
        }

        function nextQuestion() {
            // Reset for next question
            document.getElementById('mcqContainer').classList.remove('hidden');
            document.getElementById('mcqResult').classList.add('hidden');
            
            document.querySelectorAll('.mcq-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            selectedAnswer = null;
            document.getElementById('submitBtn').disabled = true;
            startMcqTimer();
        }

        function bookmarkQuestion() {
            alert('Question bookmarked!');
        }

        // Chat functionality
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage(message, 'user');
            input.value = '';
            
            // Simulate AI response
            setTimeout(() => {
                const responses = [
                    "That's a great question! Let me help you understand this concept better.",
                    "I can explain this topic in detail. Here's what you need to know:",
                    "This is an important concept for your exams. Let me break it down:",
                    "Excellent question! This topic often appears in examinations."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addChatMessage(randomResponse, 'ai');
            }, 1000);
        }

        function quickQuestion(question) {
            document.getElementById('chatInput').value = question;
            sendMessage();
        }

        function addChatMessage(message, sender) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message mb-4';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex items-start justify-end">
                        <div class="bg-blue-500 text-white rounded-lg p-3 max-w-xs mr-3">
                            <p>${message}</p>
                        </div>
                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-gray-600 text-sm"></i>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center mr-3">
                            <i class="fas fa-robot text-white text-sm"></i>
                        </div>
                        <div class="bg-white dark:bg-gray-600 rounded-lg p-3 max-w-xs">
                            <p class="dark:text-white">${message}</p>
                        </div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // Initialize all functionality
        document.addEventListener('DOMContentLoaded', () => {
            initDarkMode();
            initToolsDropdown();
            initImageResizer();
            initSignatureResizer();
            initJpgToPdf();
            initPdfTools();
            initBackgroundRemover();
        });
    </script>
</body>
</html>
